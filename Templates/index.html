<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;800&display=swap" rel="stylesheet">
  </head>
  <style>:root {
    --font-family: sans-serif;
    font-size: 16px;
    --color-green: #06c167;
    --color-grey: rgb(238, 238, 238);
    --color-greyDarker: rgb(84, 84, 84);
  }
  
  * {
    box-sizing: border-box;
  }
  
  .smallText {
    font-size: 0.7rem;
    font-weight: 300;
  }
  
  body {
    margin: 0;
    font-family: sans-serif;
  }
  
  .container {
    width: 100%;
    margin: 0 auto;
    padding: 0 60px;
    position: relative;
  }
  
  header {
    background-color: #1a1a1a;
    padding: 1rem 0;
    position: fixed;
    width: 100%;
    top: 0;
    z-index: 1000;
    
    .container {
      display: flex;
      align-items: center;
    }

    .logo-container {
      position: relative;
      height: 50px;
      display: flex;
      align-items: center;
      margin-left: 10px;
    }

    .logo {
      height: 100%;
      width: 50px;
      object-fit: contain;
      z-index: 0;
    }

    .brand-name {
      font-family: 'Montserrat', sans-serif;
      font-weight: 800;
      font-size: 28px;
      letter-spacing: -0.8px;
      color: #f8f8f8;
      margin-left: -9px;
      position: relative;
      z-index: 2;
    }

    .searchBar {
      margin-left: auto;
      position: relative;
      
      .search-input {
        background: rgba(255, 255, 255, 0.1);
        border: none;
        padding: 0.5rem 1rem;
        border-radius: 4px;
        color: white;
        font-size: 1rem;
        width: 300px;
        transition: all 0.3s ease;
        
        &:focus {
          outline: none;
          background: rgba(255, 255, 255, 0.15);
        }
        
        &::placeholder {
          color: rgba(255, 255, 255, 0.7);
        }
      }

      .search-results {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: white;
        border-radius: 4px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        margin-top: 0.5rem;
        max-height: 400px;
        overflow-y: auto;
        display: none;
        z-index: 1000;

        &.active {
          display: block;
        }

        .search-item {
          padding: 1rem;
          border-bottom: 1px solid var(--color-grey);
          cursor: pointer;
          transition: all 0.3s ease;
          display: flex;
          align-items: center;
          gap: 1rem;

          &:hover {
            background: var(--color-grey);
          }

          img {
            width: 50px;
            height: 50px;
            object-fit: cover;
            border-radius: 4px;
          }

          .item-details {
            flex: 1;
            h4 {
              margin: 0 0 0.25rem 0;
              font-weight: 500;
            }
            .item-meta {
              font-size: 0.8rem;
              color: var(--color-greyDarker);
            }
          }

          .item-price {
            color: var(--color-green);
            font-weight: 500;
          }
        }

        .no-results {
          padding: 2rem;
          text-align: center;
          color: var(--color-greyDarker);
        }
      }
    }
    .header-option {
      padding-left: 5rem;
      letter-spacing: 0.6px;
      display: flex;
      align-items: center;
      color: white;
      position: relative;
      svg {
        margin-right: 1rem;
        display: inline-flex;
        stroke: white;
      }
    }
    .currentDetails,
    .searchBar {
      display: flex;
    }
  }
  
  .options {
    padding: 1.2rem 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 80px;
    
    .container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      padding: 0 2rem;
    }
    
    .toggle-group {
      display: flex;
      align-items: center;
      
      &:first-child {
        margin-right: auto;
        margin-left: 1rem;
      }
      
      &:last-child {
        margin-left: auto;
        margin-right: 1rem;
      }
    }

    .options-btn {
      background: var(--color-grey);
      padding: 0.6rem 1.2rem;
      border-radius: 30px;
      border: 0;
      font-family: var(--font-family);
      font-size: 1rem;
      letter-spacing: 0.6px;
      display: inline-flex;
      align-items: center;
      margin-right: 0.8rem;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      
      &:last-child {
        margin-right: 0;
      }
      
      svg {
        max-width: 20px;
        margin-right: 0.4rem;
        transition: stroke 0.3s ease;
      }
      &.selected {
        background: #1a1a1a;
        color: white;
        transform: scale(1.05);
        box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        svg {
          stroke: white;
        }
      }
      &:not(.selected) {
        opacity: 0.7;
        &:hover {
          opacity: 1;
          background: var(--color-grey);
          transform: scale(1.02);
        }
      }

      .diet-indicator {
        width: 16px;
        height: 16px;
        border: 2px solid black;
        border-radius: 50%;
        margin-right: 0.4rem;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        
        &.veg {
          background: var(--color-green);
        }
        
        &.non-veg {
          background: #e74c3c;
        }
      }

      &.veg.selected {
        background: white;
        color: black;
        border: 2px solid var(--color-green);
        .diet-indicator {
          transform: scale(1.1);
        }
      }
      
      &.non-veg.selected {
        background: white;
        color: black;
        border: 2px solid #e74c3c;
        .diet-indicator {
          transform: scale(1.1);
        }
      }
    }
  }
  
  .listings {
    padding: 2rem 0;
    position: relative;
    overflow: hidden;

    .scroll-arrows {
      position: absolute;
      top: 50%;
      left: 0;
      right: 0;
      transform: translateY(-50%);
      z-index: 1;
      pointer-events: none;
      padding: 0 20px;
      
      .scroll-arrow {
        position: absolute;
        width: 48px;
        height: 48px;
        background: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        box-shadow: 0 2px 12px rgba(0,0,0,0.2);
        pointer-events: auto;
        transition: all 0.3s ease;
        border: 1px solid var(--color-grey);
        
        &.left {
          left: 10px;
        }
        
        &.right {
          right: 10px;
        }
        
        &:hover {
          background: var(--color-grey);
          transform: scale(1.05);
        }
        
        &.disabled {
          opacity: 0;
          pointer-events: none;
        }
        
        svg {
          width: 24px;
          height: 24px;
          stroke: var(--color-greyDarker);
          stroke-width: 2px;
        }
      }
    }

    .header {
      display: flex;
      align-items: center;
      margin-bottom: 2rem;
      position: relative;
      z-index: 2;
    }

    .listings-grid {
      display: flex;
      gap: 2rem;
      overflow-x: auto;
      scroll-behavior: smooth;
      padding: 1rem 0;
      margin: 0 -20px;
      padding: 1rem 20px;
      -ms-overflow-style: none;
      scrollbar-width: none;
      position: relative;
      
      &::-webkit-scrollbar {
        display: none;
      }
      
      .listings-grid-element {
        min-width: 300px;
        flex: 0 0 300px;
        background: white;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        overflow: hidden;
        transition: transform 0.3s ease;
        
        &:hover {
          transform: translateY(-5px);
        }

        .image {
          height: 200px;
          position: relative;
          
          .veg-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 20px;
            height: 20px;
            border-radius: 4px;
            border: 2px solid;
            display: flex;
            align-items: center;
            justify-content: center;
            
            &.veg {
              border-color: var(--color-green);
              &::after {
                content: '';
                width: 10px;
                height: 10px;
                border-radius: 50%;
                background: var(--color-green);
              }
            }
            
            &.non-veg {
              border-color: #e74c3c;
              &::after {
                content: '';
                width: 10px;
                height: 10px;
                border-radius: 50%;
                background: #e74c3c;
              }
            }
          }
          
          img {
            width: 100%;
            height: 100%;
            object-fit: cover;
          }
        }

        .text {
          padding: 1rem;
          border-bottom: 1px solid #eee;
          
          .text-title {
            h3 {
              font-weight: 500;
              margin: 0 0 0.5rem 0;
            }
            .info {
              display: flex;
              align-items: center;
              gap: 1rem;
              color: var(--color-greyDarker);
              font-size: 0.9rem;

              span {
                display: flex;
                align-items: center;
                gap: 0.4rem;

                svg {
                  width: 16px;
                  height: 16px;
                  stroke: var(--color-greyDarker);
                }
              }
            }
          }
          
          .rating {
            margin-top: 1rem;
            span.circle {
              background: var(--color-grey);
              color: black;
              font-weight: 500;
              padding: 0.4rem 0.8rem;
              border-radius: 4px;
            }
          }
        }

        .text-lower {
          padding: 1rem;
          .price {
            font-size: 1.2rem;
            font-weight: 500;
            color: var(--color-green);
          }
          .smallText {
            margin-top: 0.5rem;
            color: var(--color-greyDarker);
          }
        }
      }
    }
  }
  
  .header-title {
    h2 {
      font-weight: 500;
      margin: 0 0 0.5rem 0;
    }
    span {
      font-size: 0.9rem;
      color: var(--color-greyDarker);
    }
  }
  .footer {
    width: 100%;
    backdrop-filter: blur(10px);
    background-color: #1a1a1a;
    color: #b0b0b0;
    padding: 60px 0 20px 0;
    box-shadow: 0 -2px 15px rgba(0, 0, 0, 0.1);
  }

  footer a {
    color: #EEEEEE;
  }

  .footer-content {
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 40px;
    padding: 0 20px;
  }

  .footer-section h3 {
    font-family: 'Poppins', sans-serif;
    font-weight: 600;
    font-size: 18px;
    letter-spacing: 0.2px;
    color: #f8f8f8;
    margin-bottom: 20px;
  }

  .footer-section p {
    font-family: 'Inter', sans-serif;
    font-weight: 400;
    font-size: 14px;
    line-height: 1.6;
    color: #b0b0b0;
    margin-bottom: 10px;
  }

  .footer-section ul {
    list-style: none;
    padding: 0;
  }

  .footer-section ul li {
    margin-bottom: 12px;
  }

  .footer-section ul li a {
    color: #b0b0b0;
    text-decoration: none;
    font-family: 'Inter', sans-serif;
    font-weight: 400;
    font-size: 14px;
    transition: all 0.3s ease;
    padding: 2px 0;
    position: relative;
  }

  .footer-section ul li a::after {
    content: '';
    position: absolute;
    width: 0;
    height: 1px;
    bottom: 0;
    left: 0;
    background-color: #f8f8f8;
    transition: width 0.3s ease;
  }

  .footer-section ul li a:hover {
    color: #f8f8f8;
    padding-left: 5px;
  }

  .footer-section ul li a:hover::after {
    width: 100%;
  }

  .social-links {
    display: flex;
    gap: 15px;
  }

  .social-links a {
    color: #b0b0b0;
    font-size: 20px;
    transition: all 0.3s ease;
    display: inline-block;
  }

  .social-links a:hover {
    color: #f8f8f8;
    transform: translateY(-3px);
  }

  .social-links a:active {
    transform: translateY(-1px);
  }

  .footer-bottom {
    text-align: center;
    padding-top: 40px;
    margin-top: 40px;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    font-family: 'Inter', sans-serif;
    font-weight: 400;
    font-size: 13px;
    color: #888;
  }

  @media (max-width: 768px) {
    .footer-content {
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 30px;
    }
    .header {
      height: 60px;
      padding: 10px 20px;
    }
    
    .logo-container {
      margin-left: 8px;
    }
    
    .logo {
      width: 40px;
    }
    
    .brand-name {
      font-size: 24px;
      margin-left: -8px;
    }
  }

  .footer-section h3:first-child {
    font-family: 'Montserrat', sans-serif;
    font-weight: 700;
    font-size: 20px;
    letter-spacing: -0.3px;
  }

  a {
    color: #4CAF50;
    text-decoration: none;
  }

  a:hover {
    text-decoration: underline;
  }

  .primary-button {
    background-color: #FFB74D;
    color: #FFFFFF;
  }

  .primary-button:hover {
    background-color: #FF9800;
  }

  #loginForm,
  #signupForm {
    width: 100%;
    transition: display 0.3s ease;
  }

  .profile-dropdown {
    position: absolute;
    top: 100%;
    right: 0;
    background: white;
    border-radius: 4px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    margin-top: 8px;
    min-width: 150px;
  }

  .floating-cart {
    position: fixed;
    bottom: 2rem;
    right: 2rem;
    background: var(--color-green);
    color: white;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    transition: transform 0.2s;
    z-index: 1000;
  }

  .floating-cart:hover {
    transform: scale(1.05);
  }

  .floating-cart .cart-count {
    position: absolute;
    top: -5px;
    right: -5px;
    background: #ff4444;
    color: white;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    font-weight: bold;
  }

  .floating-cart i {
    font-size: 24px;
  }

  .add-to-cart-btn {
    background: var(--color-green);
    color: white;
    border: none;
    padding: 0.5rem 1rem;
    border-radius: 4px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-top: 0.5rem;
  }

  .add-to-cart-btn:hover {
    opacity: 0.9;
  }

  @keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
  }

  /* Location dropdown styles */
  .location-dropdown {
    position: relative;
    margin-left: 20px;
  }

  .location-dropdown-content {
    display: none;
    position: absolute;
    top: 100%;
    left: 0;
    background-color: #1a1a1a;
    min-width: 300px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    border-radius: 8px;
    z-index: 1000;
    margin-top: 10px;
    border: 1px solid #333;
  }

  .location-dropdown-content.show {
    display: block;
  }

  .location-search-container {
    padding: 15px;
    border-bottom: 1px solid #333;
  }

  .location-search-input {
    width: 100%;
    padding: 10px 15px;
    border: 1px solid #333;
    border-radius: 6px;
    background-color: #333;
    color: white;
    font-size: 14px;
    transition: all 0.2s;
  }

  .location-search-input:focus {
    outline: none;
    border-color: var(--color-green);
    box-shadow: 0 0 0 3px rgba(6, 193, 103, 0.1);
  }

  .location-search-input::placeholder {
    color: #888;
  }

  .search-button {
    width: 100%;
    padding: 10px;
    margin-top: 10px;
    background-color: var(--color-green);
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
  }

  .search-button:hover {
    background-color: #05a057;
  }

  .search-button i {
    font-size: 16px;
  }

  #searchResults {
    max-height: 250px;
    overflow-y: auto;
    margin-top: 10px;
  }

  .search-result-item {
    padding: 12px 15px;
    cursor: pointer;
    transition: background-color 0.2s;
    border-bottom: 1px solid #333;
  }

  .search-result-item:last-child {
    border-bottom: none;
  }

  .search-result-item:hover {
    background-color: #333;
  }

  .search-result-name {
    font-weight: 500;
    margin-bottom: 4px;
    color: #fff;
  }

  .search-result-address {
    font-size: 12px;
    color: #888;
  }

  .search-error {
    color: #ff6b6b;
    font-size: 14px;
    padding: 10px;
    text-align: center;
  }

  .location-divider {
    margin: 15px 0;
    text-align: center;
    position: relative;
  }

  .location-divider::before {
    content: "";
    position: absolute;
    left: 0;
    top: 50%;
    width: 100%;
    height: 1px;
    background: #333;
  }

  .location-divider span {
    background: #1a1a1a;
    padding: 0 10px;
    color: #888;
    font-size: 12px;
    position: relative;
    z-index: 1;
  }

  .location-option {
    padding: 12px 15px;
    display: flex;
    align-items: center;
    gap: 12px;
    cursor: pointer;
    transition: background-color 0.2s;
    color: white;
  }

  .location-option:hover {
    background-color: #333;
  }

  .location-option i {
    color: var(--color-green);
    font-size: 18px;
  }

  .location-option .smallText {
    font-size: 12px;
    color: #888;
    margin-top: 2px;
  }

  .loading-text {
    padding: 15px;
    text-align: center;
    color: #888;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
  }

  .loading-spinner {
    animation: spin 1s linear infinite;
  }

  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }

  /* Scrollbar styles for the results */
  #searchResults::-webkit-scrollbar {
    width: 8px;
  }

  #searchResults::-webkit-scrollbar-track {
    background: #1a1a1a;
  }

  #searchResults::-webkit-scrollbar-thumb {
    background: #333;
    border-radius: 4px;
  }

  #searchResults::-webkit-scrollbar-thumb:hover {
    background: #444;
  }
  </style>
  <body>
    <header>
      <div class="container">
        <div class="logo-container">
          <img src="1.jpg" alt="MunchExpress Logo" class="logo">
          <div class="brand-name">unchExpress</div>
        </div>
        <div class="location-dropdown">
          <div class="header-option" id="locationOption">
            <i class="fas fa-map-marker-alt"></i>
            <span id="currentLocation">Select your location</span>
            <i class="fas fa-chevron-down"></i>
          </div>
          <div class="location-dropdown-content" id="locationDropdown">
            <!-- Search Location Option -->
            <div class="location-search-container">
              <input type="text" 
                     class="location-search-input" 
                     id="locationSearch" 
                     placeholder="Enter city, area, or street name"
                     onkeyup="handleSearchKeyup(event)">
              <button class="search-button" onclick="handleSearchClick()">
                <i class="fas fa-search"></i>
                Search Location
              </button>
              <div id="searchResults"></div>
            </div>

            <div class="location-divider">
              <span>OR</span>
            </div>

            <!-- Detect Location Option -->
            <div class="location-option" onclick="detectCurrentLocation()">
              <i class="fas fa-location-crosshairs"></i>
              <div>
                <div>Detect current location</div>
                <div class="smallText">Using GPS</div>
              </div>
            </div>
          </div>
        </div>
        <div class="currentDetails">
          <div class="header-option">
            <i data-feather="clock"></i>
            <span>Deliver now</span>
          </div>
        </div>
        <div class="searchBar">
          <input type="text" class="search-input" placeholder="Search for dishes, restaurants..." />
          <div class="search-results"></div>
          <div class="header-option" id="authSection">
            <a href="{{url_for('login')}}" style="text-decoration: none; color: white; cursor: pointer;" id="signInLink">
              <span>Sign in</span>
            </a>
            <div class="user-profile" style="display: none; position: relative;">
              <div class="profile-trigger" style="display: flex; align-items: center; cursor: pointer;">
                <i data-feather="user" style="margin-right: 8px;"></i>
                <span id="userName"></span>
              </div>
              <div class="profile-dropdown" style="display: none; position: absolute; top: 100%; right: 0; background: white; border-radius: 4px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-top: 8px; min-width: 150px;">
                <div style="padding: 12px; border-bottom: 1px solid #eee;">
                  <div id="userNameFull" style="font-weight: 500; color: #333;"></div>
                  <div id="userEmail" style="font-size: 0.8rem; color: #666; margin-top: 4px;"></div>
                </div>
                <div class="logout-btn" style="padding: 12px; color: #e74c3c; cursor: pointer; font-weight: 500;" onclick="handleLogout()">
                  Logout
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </header>

    <div class="options">
      <div class="container">
        <div class="toggle-group">
          <button class="options-btn selected">
            <i data-feather="shopping-bag"></i>
            <span>Delivery</span>
          </button>
          <button class="options-btn">
            <i data-feather="watch"></i>
            <span>Pick-up</span>
          </button>
        </div>
        <div class="toggle-group">
          <button class="options-btn veg" data-filter="veg">
            <div class="diet-indicator veg"></div>
            <span>Veg</span>
          </button>
          <button class="options-btn non-veg" data-filter="non-veg">
            <div class="diet-indicator non-veg"></div>
            <span>Non-Veg</span>
          </button>
        </div>
      </div>
    </div>

    <div class="listings">
      <div class="container">
        <div class="header">
          <div class="header-title">
            <h2>Popular Indian Dishes</h2>
            <span>Authentic taste of India</span>
          </div>
        </div>
        <div class="scroll-arrows">
          <button class="scroll-arrow left disabled">
            <i data-feather="chevron-left"></i>
          </button>
          <button class="scroll-arrow right">
            <i data-feather="chevron-right"></i>
          </button>
        </div>
        <div class="listings-grid">
          <div class="listings-grid-element" data-type="veg">
            <div class="image">
              <div class="veg-badge veg"></div>
              <img src="https://images.unsplash.com/photo-1631452180519-c014fe946bc7?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80" alt="Paneer Butter Masala" />
            </div>
            <div class="text">
              <div class="text-title">
                <h3>Paneer Butter Masala</h3>
                <div class="info">
                  <span>30-40 MINS</span>
                  <span>Serves 2</span>
                </div>
              </div>
              <div class="rating">
                <span class="circle">4.5</span>
              </div>
            </div>
            <div class="text-lower">
              <div class="price">₹299</div>
              <span class="smallText">North Indian | Curry | Paneer</span>
            </div>
          </div>

          <div class="listings-grid-element" data-type="veg">
            <div class="image">
              <div class="veg-badge veg"></div>
              <img src="https://www.shutterstock.com/image-photo/yummy-dalmakhani-served-coriander-leaf-600nw-1889883070.jpg" alt="Dal Makhani" />
            </div>
            <div class="text">
              <div class="text-title">
                <h3>Dal Makhani</h3>
                <div class="info">
                  <span>25-35 MINS</span>
                  <span>Serves 2</span>
                </div>
              </div>
              <div class="rating">
                <span class="circle">4.3</span>
              </div>
            </div>
            <div class="text-lower">
              <div class="price">₹249</div>
              <span class="smallText">North Indian | Dal | Creamy</span>
            </div>
          </div>

          <div class="listings-grid-element" data-type="veg">
            <div class="image">
              <div class="veg-badge veg"></div>
              <img src="https://culinarydelightsandbeyond.com/wp-content/uploads/2023/03/dosa-5oF7d_hPJG4-scaled.jpg" alt="Masala Dosa" />
            </div>
            <div class="text">
              <div class="text-title">
                <h3>Masala Dosa</h3>
                <div class="info">
                  <span>20-30 MINS</span>
                  <span>Serves 1</span>
                </div>
              </div>
              <div class="rating">
                <span class="circle">4.7</span>
              </div>
            </div>
            <div class="text-lower">
              <div class="price">₹199</div>
              <span class="smallText">South Indian | Breakfast | Crispy</span>
            </div>
          </div>

          <div class="listings-grid-element" data-type="veg">
            <div class="image">
              <div class="veg-badge veg"></div>
              <img src="https://assets.bonappetit.com/photos/63cb14735125107865c0fe8f/1713151178965-W30U2J0AYQGRSHBTNSBO/20240331_101819.jpg?format=1000w" alt="Pav Bhaji" />
            </div>
            <div class="text">
              <div class="text-title">
                <h3>Pav Bhaji</h3>
                <div class="info">
                  <span>25-35 MINS</span>
                  <span>Serves 2</span>
                </div>
              </div>
              <div class="rating">
                <span class="circle">4.6</span>
              </div>
            </div>
            <div class="text-lower">
              <div class="price">₹179</div>
              <span class="smallText">Street Food | Mumbai Special</span>
            </div>
          </div>

          <div class="listings-grid-element" data-type="non-veg">
            <div class="image">
              <div class="veg-badge non-veg"></div>
              <img src="https://glebekitchen.com/wp-content/uploads/2016/12/chickentikkakebab.jpg" />
            </div>
            <div class="text">
              <div class="text-title">
                <h3>Chicken Tikka</h3>
                <div class="info">
                  <span>30-40 MINS</span>
                  <span>Serves 2</span>
                </div>
              </div>
              <div class="rating">
                <span class="circle">4.7</span>
              </div>
            </div>
            <div class="text-lower">
              <div class="price">₹329</div>
              <span class="smallText">Tandoor | Appetizer | Spicy</span>
            </div>
          </div>

          <div class="listings-grid-element" data-type="non-veg">
            <div class="image">
              <div class="veg-badge non-veg"></div>
              <img src="https://glebekitchen.com/wp-content/uploads/2016/12/chickentikkakebab.jpg" />
            </div>
            <div class="text">
              <div class="text-title">
                <h3>Chicken Tikka</h3>
                <div class="info">
                  <span>30-40 MINS</span>
                  <span>Serves 2</span>
                </div>
              </div>
              <div class="rating">
                <span class="circle">4.7</span>
              </div>
            </div>
            <div class="text-lower">
              <div class="price">₹329</div>
              <span class="smallText">Tandoor | Appetizer | Spicy</span>
            </div>
          </div>

          <div class="listings-grid-element" data-type="non-veg">
            <div class="image">
              <div class="veg-badge non-veg"></div>
              <img src="https://vismaifood.com/storage/app/uploads/public/287/b6d/6c1/thumb__700_0_0_0_auto.jpg" alt="Fish Curry" />
            </div>
            <div class="text">
              <div class="text-title">
                <h3>Fish Curry</h3>
                <div class="info">
                  <span>35-45 MINS</span>
                  <span>Serves 2</span>
                </div>
              </div>
              <div class="rating">
                <span class="circle">4.5</span>
              </div>
            </div>
            <div class="text-lower">
              <div class="price">₹399</div>
              <span class="smallText">Bengali | Curry | Seafood</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="listings">
      <div class="container">
        <div class="header">
          <div class="header-title">
            <h2>Famous Restaurants</h2>
            <span>Top rated places near you</span>
          </div>
        </div>
        <div class="scroll-arrows">
          <button class="scroll-arrow left disabled">
            <i data-feather="chevron-left"></i>
          </button>
          <button class="scroll-arrow right">
            <i data-feather="chevron-right"></i>
          </button>
        </div>
        <div class="listings-grid">
          <div class="listings-grid-element">
            <a href="{{url_for('taj')}}">
            <div class="image">
              <img src="https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80" alt="Taj Palace Restaurant" >
            </div>
            <div class="text">
              <div class="text-title">
                <h3>Taj Palace Restaurant</h3>
                <div class="info">
                  <span><i data-feather="clock"></i> 20-30 MINS</span>
                  <span><i data-feather="tag"></i> ₹500 for two</span>
                </div>
              </div>
              <div class="rating">
                <span class="circle">4.8</span>
              </div>
            </div>
            <div class="text-lower">
              <div class="price">Free Delivery</div>
              <span class="smallText">North Indian | South Indian | Non-Veg</span>
            </div>
            </a>
          </div>

          <div class="listings-grid-element">
            <a href="{{url_for('punjab')}}">
            <div class="image">
              <img src="https://images.unsplash.com/photo-1514933651103-005eec06c04b?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80" alt="Punjab Grill">
            </div>
            <div class="text">
              <div class="text-title">
                <h3>Punjab Grill</h3>
                <div class="info">
                  <span><i data-feather="clock"></i> 25-35 MINS</span>
                  <span><i data-feather="tag"></i> ₹800 for two</span>
                </div>
              </div>
              <div class="rating">
                <span class="circle">4.6</span>
              </div>
            </div>
            <div class="text-lower">
              <div class="price">₹30 Delivery fee</div>
              <span class="smallText">North Indian | Mughlai | Non-Veg</span>
            </div>
            </a>
          </div>

          <div class="listings-grid-element">
            <a href="{{url_for('dosa')}}">
            <div class="image">
              <img src="https://images.unsplash.com/photo-1555396273-367ea4eb4db5?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80" alt="Dosa Plaza" onclick="window.location.href='DosaPlaza.html';">
            </div>
            <div class="text">
              <div class="text-title">
                <h3>Dosa Plaza</h3>
                <div class="info">
                  <span><i data-feather="clock"></i> 15-25 MINS</span>
                  <span><i data-feather="tag"></i> ₹300 for two</span>
                </div>
              </div>
              <div class="rating">
                <span class="circle">4.4</span>
              </div>
            </div>
            <div class="text-lower">
              <div class="price">Free Delivery</div>
              <span class="smallText">South Indian | Non-Veg | Fast Food</span>
            </div>
            </a>
          </div>

          <div class="listings-grid-element">
            <a href="{{url_for('biryani')}}">
            <div class="image">
              <img src="https://images.unsplash.com/photo-1587899897387-091ebd01a6b2?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80" alt="Biryani House" onclick="window.location.href='BiryaniHouse.html';">
            </div>
            <div class="text">
              <div class="text-title">
                <h3>Biryani House</h3>
                <div class="info">
                  <span><i data-feather="clock"></i> 30-40 MINS</span>
                  <span><i data-feather="tag"></i> ₹600 for two</span>
                </div>
              </div>
              <div class="rating">
                <span class="circle">4.7</span>
              </div>
            </div>
            <div class="text-lower">
              <div class="price">₹40 Delivery fee</div>
              <span class="smallText">Hyderabadi | Mughlai | Non-Veg</span>
            </div>
            </a>
          </div>

          <div class="listings-grid-element" data-type="veg">
            <a href="{{url_for('sarwana')}}">
            <div class="image">
              <img src="https://images.unsplash.com/photo-1552566626-52f8b828add9" alt="Saravana Bhavan">
            </div>
            <div class="text">
              <div class="text-title">
                <h3>Saravana Bhavan</h3>
                <div class="info">
                  <span><i data-feather="clock"></i> 20-30 MINS</span>
                  <span><i data-feather="tag"></i> ₹400 for two</span>
                </div>
              </div>
              <div class="rating">
                <span class="circle">4.5</span>
              </div>
            </div>
            <div class="text-lower">
              <div class="price">Free Delivery</div>
              <span class="smallText">Indian | Pure Veg | Authentic</span>
            </div>
            </a>
          </div>

          <div class="listings-grid-element" data-type="non-veg">
            <a href="{{url_for('mughal')}}">
            <div class="image">
              <div class="veg-badge non-veg"></div>
              <img src="https://images.unsplash.com/photo-1517248135467-4c7edcad34c4" alt="Mughals Kitchen" onclick="window.location.href='MughalsKitchen.html';">
            </div>
            <div class="text">
              <div class="text-title">
                <h3>Mughals Kitchen</h3>
                <div class="info">
                  <span><i data-feather="clock"></i> 35-45 MINS</span>
                  <span><i data-feather="tag"></i> ₹700 for two</span>
                </div>
              </div>
              <div class="rating">
                <span class="circle">4.6</span>
              </div>
            </div>
            <div class="text-lower">
              <div class="price">₹40 Delivery fee</div>
              <span class="smallText">Mughlai | Kebabs | Non-Veg</span>
            </div>
            </a>
          </div>
        </div>
      </div>
    </div>

    <div class="listings">
      <div class="container">
        <div class="header">
          <div class="header-title">
            <h2>Popular Bakery Items</h2>
            <span>Fresh from the oven</span>
          </div>
        </div>
        <div class="scroll-arrows">
          <button class="scroll-arrow left disabled">
            <i data-feather="chevron-left"></i>
          </button>
          <button class="scroll-arrow right">
            <i data-feather="chevron-right"></i>
          </button>
        </div>
        <div class="listings-grid">
          <div class="listings-grid-element" data-type="veg">
            <div class="image">
              <div class="veg-badge veg"></div>
              <img src="https://www.giftacrossindia.com/media/catalog/product/new/GAICAK0331.jpg" alt="Chocolate Pastry" >
            </div>
            <div class="text">
              <div class="text-title">
                <h3>Chocolate Pastry</h3>
                <div class="info">
                  <span>15-20 MINS</span>
                  <span>2 Pieces</span>
                </div>
              </div>
              <div class="rating">
                <span class="circle">4.6</span>
              </div>
            </div>
            <div class="text-lower">
              <div class="price">₹149</div>
              <span class="smallText">Dessert | Pure Veg | Sweet</span>
            </div>
          </div>

          <div class="listings-grid-element" data-type="veg">
            <div class="image">
              <div class="veg-badge veg"></div>
              <img src="https://images.squarespace-cdn.com/content/v1/5e7291c4298b2104067f8dcf/1713151178965-W30U2J0AYQGRSHBTNSBO/20240331_101819.jpg?format=1000w" alt="Fruit Cake" />
            </div>
            <div class="text">
              <div class="text-title">
                <h3>Fruit Cake</h3>
                <div class="info">
                  <span>20-25 MINS</span>
                  <span>500g</span>
                </div>
              </div>
              <div class="rating">
                <span class="circle">4.4</span>
              </div>
            </div>
            <div class="text-lower">
              <div class="price">₹299</div>
              <span class="smallText">Cake | Pure Veg | Fruity</span>
            </div>
          </div>

          <div class="listings-grid-element" data-type="veg">
            <div class="image">
              <div class="veg-badge veg"></div>
              <img src="https://butternutbakeryblog.com/wp-content/uploads/2021/04/lemon-bar-butter-cookies.jpg" alt="Butter Cookies" />
            </div>
            <div class="text">
              <div class="text-title">
                <h3>Butter Cookies</h3>
                <div class="info">
                  <span>15-20 MINS</span>
                  <span>250g Pack</span>
                </div>
              </div>
              <div class="rating">
                <span class="circle">4.5</span>
              </div>
            </div>
            <div class="text-lower">
              <div class="price">₹199</div>
              <span class="smallText">Cookies | Pure Veg | Crunchy</span>
            </div>
          </div>

          <div class="listings-grid-element" data-type="non-veg">
            <div class="image">
              <div class="veg-badge non-veg"></div>
              <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgREQBKw2znu93C60JJ37YOqHFSMpcOKyhOHlLbhpiLhqFhHcDfO_Ov6qhCmPZOKIEr7f-aRZCGRUTojxozpXEbeb-iIrrAjMLqOYrvtD_428eIVcbmbJO4ROav2l27-zG-ZiBmAObnf-w/s1600/chicken+puffs.JPG" alt="Chicken Puff" />
            </div>
            <div class="text">
              <div class="text-title">
                <h3>Chicken Puff</h3>
                <div class="info">
                  <span>20-25 MINS</span>
                  <span>2 Pieces</span>
                </div>
              </div>
              <div class="rating">
                <span class="circle">4.7</span>
              </div>
            </div>
            <div class="text-lower">
              <div class="price">₹129</div>
              <span class="smallText">Snacks | Non-Veg | Hot</span>
            </div>
          </div>

          <div class="listings-grid-element" data-type="non-veg">
            <div class="image">
              <div class="veg-badge non-veg"></div>
              <img src="https://i.ytimg.com/vi/l4Zh36vBd28/maxresdefault.jpg" alt="Egg Puff" />
            </div>
            <div class="text">
              <div class="text-title">
                <h3>Egg Puff</h3>
                <div class="info">
                  <span>15-20 MINS</span>
                  <span>2 Pieces</span>
                </div>
              </div>
              <div class="rating">
                <span class="circle">4.3</span>
              </div>
            </div>
            <div class="text-lower">
              <div class="price">₹99</div>
              <span class="smallText">Snacks | Non-Veg | Hot</span>
            </div>
          </div>

          <div class="listings-grid-element" data-type="non-veg">
            <div class="image">
              <div class="veg-badge non-veg"></div>
              <img src="https://www.licious.in/blog/wp-content/uploads/2022/12/Shutterstock_2132499279.jpg" alt="Chicken Roll" />
            </div>
            <div class="text">
              <div class="text-title">
                <h3>Chicken Roll</h3>
                <div class="info">
                  <span>20-25 MINS</span>
                  <span>1 Piece</span>
                </div>
              </div>
              <div class="rating">
                <span class="circle">4.5</span>
              </div>
            </div>
            <div class="text-lower">
              <div class="price">₹149</div>
              <span class="smallText">Snacks | Non-Veg | Spicy</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="listings">
      <div class="container">
        <div class="header">
          <div class="header-title">
            <h2>Fast Food Favorites</h2>
            <span>Quick bites for your cravings</span>
          </div>
        </div>
        <div class="scroll-arrows">
          <button class="scroll-arrow left disabled">
            <i data-feather="chevron-left"></i>
          </button>
          <button class="scroll-arrow right">
            <i data-feather="chevron-right"></i>
          </button>
        </div>
        <div class="listings-grid">
          <div class="listings-grid-element" data-type="veg">
            <div class="image">
              <div class="veg-badge veg"></div>
              <img src="https://lodough.co/cdn/shop/articles/Veggie_Supreme.jpg?v=1612191127" alt="Veggie Pizza" />
            </div>
            <div class="text">
              <div class="text-title">
                <h3>Veggie Supreme Pizza</h3>
                <div class="info">
                  <span>25-30 MINS</span>
                  <span>Medium 10"</span>
                </div>
              </div>
              <div class="rating">
                <span class="circle">4.6</span>
              </div>
            </div>
            <div class="text-lower">
              <div class="price">₹399</div>
              <span class="smallText">Pizza | Pure Veg | Cheese</span>
            </div>
          </div>

          <div class="listings-grid-element" data-type="veg">
            <div class="image">
              <div class="veg-badge veg"></div>
              <img src="https://images.unsplash.com/photo-1551782450-a2132b4ba21d" alt="Veg Burger" />
            </div>
            <div class="text">
              <div class="text-title">
                <h3>Crispy Veg Burger</h3>
                <div class="info">
                  <span>20-25 MINS</span>
                  <span>1 Piece</span>
                </div>
              </div>
              <div class="rating">
                <span class="circle">4.4</span>
              </div>
            </div>
            <div class="text-lower">
              <div class="price">₹149</div>
              <span class="smallText">Burger | Pure Veg | Crispy</span>
            </div>
          </div>

          <div class="listings-grid-element" data-type="veg">
            <div class="image">
              <div class="veg-badge veg"></div>
              <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRDECJqFHDD8AqCC7WpopwFTyaCSEN5X2bQnA&s" alt="French Fries" />
            </div>
            <div class="text">
              <div class="text-title">
                <h3>Loaded French Fries</h3>
                <div class="info">
                  <span>15-20 MINS</span>
                  <span>Regular</span>
                </div>
              </div>
              <div class="rating">
                <span class="circle">4.5</span>
              </div>
            </div>
            <div class="text-lower">
              <div class="price">₹129</div>
              <span class="smallText">Fries | Pure Veg | Crispy</span>
            </div>
          </div>

          <div class="listings-grid-element" data-type="non-veg">
            <div class="image">
              <div class="veg-badge non-veg"></div>
              <img src="https://images.unsplash.com/photo-1565299624946-b28f40a0ae38" alt="Chicken Pizza" />
            </div>
            <div class="text">
              <div class="text-title">
                <h3>BBQ Chicken Pizza</h3>
                <div class="info">
                  <span>25-35 MINS</span>
                  <span>Medium 10"</span>
                </div>
              </div>
              <div class="rating">
                <span class="circle">4.7</span>
              </div>
            </div>
            <div class="text-lower">
              <div class="price">₹449</div>
              <span class="smallText">Pizza | Non-Veg | Spicy</span>
            </div>
          </div>

          <div class="listings-grid-element" data-type="non-veg">
            <div class="image">
              <div class="veg-badge non-veg"></div>
              <img src="https://images.unsplash.com/photo-1568901346375-23c9450c58cd" alt="Chicken Burger" />
            </div>
            <div class="text">
              <div class="text-title">
                <h3>Chicken Burger</h3>
                <div class="info">
                  <span>20-30 MINS</span>
                  <span>1 Piece</span>
                </div>
              </div>
              <div class="rating">
                <span class="circle">4.6</span>
              </div>
            </div>
            <div class="text-lower">
              <div class="price">₹199</div>
              <span class="smallText">Burger | Non-Veg | Grilled</span>
            </div>
          </div>

          <div class="listings-grid-element" data-type="non-veg">
            <div class="image">
              <div class="veg-badge non-veg"></div>
              <img src="https://images.unsplash.com/photo-1562967914-608f82629710" alt="Chicken Wings" />
            </div>
            <div class="text">
              <div class="text-title">
                <h3>Spicy Chicken Wings</h3>
                <div class="info">
                  <span>25-30 MINS</span>
                  <span>8 Pieces</span>
                </div>
              </div>
              <div class="rating">
                <span class="circle">4.8</span>
              </div>
            </div>
            <div class="text-lower">
              <div class="price">₹349</div>
              <span class="smallText">Wings | Non-Veg | Hot</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="floating-cart">
      <a href="{{url_for('cart')}}">
      <i data-feather="shopping-cart"></i>
      <div class="cart-count">0</div>
    </a>
    </div>

    <script src="https://unpkg.com/feather-icons"></script>
    <script>
      feather.replace()
    </script>

    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const filterButtons = document.querySelectorAll('.options-btn[data-filter]')
        const menuItems = document.querySelectorAll('.listings-grid-element[data-type]')

        filterButtons.forEach(button => {
          button.addEventListener('click', () => {
            const filterValue = button.getAttribute('data-filter')
            
            // If clicking the already selected button, deselect it and show all items
            if (button.classList.contains('selected')) {
              button.classList.remove('selected')
              menuItems.forEach(item => {
                item.style.display = 'block'
                item.style.opacity = '0'
                setTimeout(() => {
                  item.style.opacity = '1'
                }, 50)
              })
            } else {
              // Otherwise, select this button and filter items
              filterButtons.forEach(btn => btn.classList.remove('selected'))
              button.classList.add('selected')
              
              menuItems.forEach(item => {
                if (item.getAttribute('data-type') === filterValue) {
                  item.style.display = 'block'
                  item.style.opacity = '0'
                  setTimeout(() => {
                    item.style.opacity = '1'
                  }, 50)
                } else {
                  item.style.display = 'none'
                }
              })
            }
          })
        })

        const optionButtons = document.querySelectorAll('.options-btn:not([data-filter])')
        optionButtons.forEach(button => {
          button.addEventListener('click', () => {
            optionButtons.forEach(btn => btn.classList.remove('selected'))
            button.classList.add('selected')
          })
        })

        const listings = document.querySelectorAll('.listings')
        listings.forEach(listing => {
          const scrollContainer = listing.querySelector('.listings-grid')
          const leftArrow = listing.querySelector('.scroll-arrow.left')
          const rightArrow = listing.querySelector('.scroll-arrow.right')

          if (scrollContainer && leftArrow && rightArrow) {
            leftArrow.addEventListener('click', () => {
              scrollContainer.scrollBy({
                left: -scrollContainer.offsetWidth,
                behavior: 'smooth'
              })
            })

            rightArrow.addEventListener('click', () => {
              scrollContainer.scrollBy({
                left: scrollContainer.offsetWidth,
                behavior: 'smooth'
              })
            })

            scrollContainer.addEventListener('scroll', () => {
              const isAtStart = scrollContainer.scrollLeft === 0
              const isAtEnd = scrollContainer.scrollLeft + scrollContainer.offsetWidth >= scrollContainer.scrollWidth

              leftArrow.classList.toggle('disabled', isAtStart)
              rightArrow.classList.toggle('disabled', isAtEnd)
            })
          }
        })

        const searchInput = document.querySelector('.search-input');
        const searchResults = document.querySelector('.search-results');
        
        function getAllItems() {
          const items = [];
          document.querySelectorAll('.listings-grid-element').forEach(element => {
            const title = element.querySelector('h3').textContent;
            const price = element.querySelector('.price').textContent;
            const image = element.querySelector('img').src;
            const type = element.getAttribute('data-type') || 'N/A';
            const meta = element.querySelector('.smallText').textContent;
            const rating = element.querySelector('.circle').textContent;
            
            items.push({
              title,
              price,
              image,
              type,
              meta,
              rating
            });
          });
          return items;
        }

        function filterItems(items, query) {
          return items.filter(item => {
            const searchString = `${item.title} ${item.meta}`.toLowerCase();
            return searchString.includes(query.toLowerCase());
          });
        }

        function renderResults(results) {
          if (results.length === 0) {
            searchResults.innerHTML = `
              <div class="no-results">
                <i data-feather="search"></i>
                <p>No items found</p>
              </div>
            `;
            feather.replace();
            return;
          }

          searchResults.innerHTML = results.map(item => `
            <div class="search-item">
              <img src="${item.image}" alt="${item.title}" />
              <div class="item-details">
                <h4>${item.title}</h4>
                <div class="item-meta">
                  ${item.meta} • Rating: ${item.rating}
                </div>
              </div>
              <div class="item-price">${item.price}</div>
            </div>
          `).join('');
            
          feather.replace();
        }

        let debounceTimer;
        searchInput.addEventListener('input', (e) => {
          clearTimeout(debounceTimer);
          debounceTimer = setTimeout(() => {
            const query = e.target.value.trim();
            
            if (query.length === 0) {
              searchResults.classList.remove('active');
              return;
            }

            // Deselect any active veg/non-veg filters when searching
            filterButtons.forEach(btn => btn.classList.remove('selected'));
            // Show all items
            menuItems.forEach(item => {
              item.style.display = 'block';
              item.style.opacity = '1';
            });

            const allItems = getAllItems();
            const filteredItems = filterItems(allItems, query);
            renderResults(filteredItems);
            searchResults.classList.add('active');
          }, 300);
        });

        document.addEventListener('click', (e) => {
          if (!searchInput.contains(e.target) && !searchResults.contains(e.target)) {
            searchResults.classList.remove('active');
          }
        });

        searchResults.addEventListener('click', (e) => {
          const searchItem = e.target.closest('.search-item');
          if (searchItem) {
            const itemTitle = searchItem.querySelector('h4').textContent;
            const targetElement = Array.from(document.querySelectorAll('.listings-grid-element'))
              .find(element => element.querySelector('h3').textContent === itemTitle);
            
            if (targetElement) {
              // Deselect any active veg/non-veg filters
              filterButtons.forEach(btn => btn.classList.remove('selected'));
              // Show all items
              menuItems.forEach(item => {
                item.style.display = 'block';
                item.style.opacity = '1';
              });
              
              targetElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
              targetElement.style.transform = 'scale(1.05)';
              setTimeout(() => {
                targetElement.style.transform = '';
              }, 1000);
              searchResults.classList.remove('active');
              searchInput.value = '';
            }
          }
        });

        // User Profile Management
        const currentUser = JSON.parse(localStorage.getItem('currentUser'));
        const signInLink = document.getElementById('signInLink');
        const userProfile = document.querySelector('.user-profile');
        const profileDropdown = document.querySelector('.profile-dropdown');
        const profileTrigger = document.querySelector('.profile-trigger');

        if (currentUser) {
          signInLink.style.display = 'none';
          userProfile.style.display = 'block';
          document.getElementById('userName').textContent = currentUser.name.split(' ')[0];
          document.getElementById('userNameFull').textContent = currentUser.name;
          document.getElementById('userEmail').textContent = currentUser.email;
        }

        // Toggle profile dropdown
        profileTrigger?.addEventListener('click', (e) => {
          e.stopPropagation();
          profileDropdown.style.display = profileDropdown.style.display === 'none' ? 'block' : 'none';
        });

        // Close dropdown when clicking outside
        document.addEventListener('click', () => {
          if (profileDropdown) {
            profileDropdown.style.display = 'none';
          }
        });

        // Prevent dropdown from closing when clicking inside it
        profileDropdown?.addEventListener('click', (e) => {
          e.stopPropagation();
        });

        let cart = JSON.parse(localStorage.getItem('cart')) || [];

        function updateCartCount() {
          const cartCount = document.querySelector('.cart-count');
          const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
          cartCount.textContent = totalItems;
        }

        function addToCart(name, price, image) {
          const existingItem = cart.find(item => item.name === name);
          
          if (existingItem) {
            existingItem.quantity += 1;
          } else {
            cart.push({
              name,
              price,
              image,
              quantity: 1
            });
          }
          
          localStorage.setItem('cart', JSON.stringify(cart));
          updateCartCount();
          
          // Show feedback to user
          const button = document.querySelector(`button[onclick="addToCart('${name}', ${price}, '${image || ''}')"]`);
          if (button) {
            const originalText = button.innerHTML;
            button.innerHTML = '<i data-feather="check"></i> Added';
            button.style.backgroundColor = '#28a745';
            setTimeout(() => {
              button.innerHTML = originalText;
              button.style.backgroundColor = '';
              feather.replace();
            }, 1000);
          }
        }

        // Add "Add to Cart" buttons to all listing elements
        document.querySelectorAll('.listings-grid-element').forEach(element => {
          const name = element.querySelector('h3').textContent;
          const priceText = element.querySelector('.price').textContent;
          const price = parseFloat(priceText.replace('₹', ''));
          const image = element.querySelector('img').src;
          
          const addToCartBtn = document.createElement('button');
          addToCartBtn.className = 'add-to-cart-btn';
          // Check if this is a restaurant listing by looking at its parent section's title
          const sectionTitle = element.closest('.listings').querySelector('.header-title h2').textContent;
          addToCartBtn.textContent = sectionTitle === 'Famous Restaurants' ? 'Book' : 'Add to Cart';
          addToCartBtn.onclick = () => addToCart(name, price, image);

          element.querySelector('.info').appendChild(addToCartBtn);
        });

        // Initialize cart count when page loads
        document.addEventListener('DOMContentLoaded', () => {
          cart = JSON.parse(localStorage.getItem('cart')) || [];
          updateCartCount();
          feather.replace();
        });
      });

      function handleLogout() {
        localStorage.removeItem('currentUser');
        window.location.reload();
      }
    </script>

    <script>
        // Global variables for location feature
        const locationDropdown = document.getElementById('locationDropdown');
        const locationOption = document.getElementById('locationOption');
        const locationText = document.getElementById('currentLocation');
        const searchInput = document.getElementById('locationSearch');
        const searchResults = document.getElementById('searchResults');
        let searchTimeout = null;

        // Toggle dropdown
        locationOption.addEventListener('click', (e) => {
            e.stopPropagation();
            locationDropdown.classList.toggle('show');
            if (locationDropdown.classList.contains('show')) {
                searchInput.focus();
            }
        });

        // Close dropdown when clicking outside
        document.addEventListener('click', (e) => {
            if (!locationDropdown.contains(e.target) && !locationOption.contains(e.target)) {
                locationDropdown.classList.remove('show');
            }
        });

        // Handle search input with enter key
        function handleSearchKeyup(event) {
            if (event.key === 'Enter') {
                handleSearchClick();
            }
        }

        // Handle search button click
        function handleSearchClick() {
            const searchText = searchInput.value.trim();
            if (searchText.length >= 3) {
                searchLocation(searchText);
            } else {
                searchResults.innerHTML = `
                    <div class="search-error">
                        Please enter at least 3 characters to search
                    </div>
                `;
            }
        }

        // Search location with improved error handling
        async function searchLocation(query) {
            searchResults.innerHTML = `
                <div class="loading-text">
                    <i class="fas fa-spinner loading-spinner"></i>
                    Searching for "${query}"...
                </div>
            `;

            try {
                const response = await fetch(
                    `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(query)}&limit=5&addressdetails=1`
                );
                
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }

                const results = await response.json();

                if (results.length === 0) {
                    searchResults.innerHTML = `
                        <div class="search-error">
                            No locations found for "${query}"
                        </div>
                    `;
                    return;
                }

                searchResults.innerHTML = results.map(result => {
                    const mainText = [
                        result.address.road,
                        result.address.suburb,
                        result.address.city || result.address.town || result.address.village,
                        result.address.state
                    ].filter(Boolean).join(', ');

                    return `
                        <div class="search-result-item" 
                             onclick="selectSearchResult('${mainText}', ${result.lat}, ${result.lon}, ${JSON.stringify(result.address).replace(/"/g, '&quot;')})">
                            <div class="search-result-name">${mainText}</div>
                            <div class="search-result-address">${result.display_name}</div>
                        </div>
                    `;
                }).join('');

            } catch (error) {
                console.error('Search error:', error);
                searchResults.innerHTML = `
                    <div class="search-error">
                        Error searching for locations. Please try again.
                    </div>
                `;
            }
        }

        // Detect current location with improved city detection
        async function detectCurrentLocation() {
            if (!navigator.geolocation) {
                alert('Geolocation is not supported by your browser');
                return;
            }

            locationText.innerHTML = `
                <i class="fas fa-spinner loading-spinner"></i>
                Detecting your location...
            `;

            try {
                const position = await new Promise((resolve, reject) => {
                    navigator.geolocation.getCurrentPosition(resolve, reject, {
                        enableHighAccuracy: true,
                        timeout: 10000,
                        maximumAge: 0
                    });
                });

                const { latitude, longitude } = position.coords;
                
                // Reverse geocode with detailed address information
                const response = await fetch(
                    `https://nominatim.openstreetmap.org/reverse?lat=${latitude}&lon=${longitude}&format=json&addressdetails=1`
                );
                
                if (!response.ok) {
                    throw new Error('Failed to get location details');
                }

                const data = await response.json();

                // Prioritize city-level information
                const address = data.address;
                const locationName = [
                    address.road,
                    address.suburb,
                    address.city || address.town || address.village,
                    address.state
                ].filter(Boolean).join(', ');

                // Update UI
                locationText.textContent = locationName;
                
                // Store location with full address details
                localStorage.setItem('savedLocation', JSON.stringify({
                    address: locationName,
                    coordinates: { lat: latitude, lng: longitude },
                    fullAddress: address
                }));

                // Close dropdown
                locationDropdown.classList.remove('show');

            } catch (error) {
                console.error('Error:', error);
                locationText.textContent = 'Could not detect location';
                
                if (error.code === 1) {
                    alert('Location access denied. Please enable location services in your browser settings.');
                } else if (error.code === 2) {
                    alert('Location unavailable. Please check your GPS settings and try again.');
                } else {
                    alert('Unable to detect your location. Please try searching instead.');
                }
            }
        }

        // Select search result with improved address handling
        function selectSearchResult(address, lat, lon, fullAddress) {
            locationText.textContent = address;
            
            // Store location with full address details
            localStorage.setItem('savedLocation', JSON.stringify({
                address,
                coordinates: { lat, lng: lon },
                fullAddress
            }));

            // Clear search
            searchInput.value = '';
            searchResults.innerHTML = '';
            
            // Close dropdown
            locationDropdown.classList.remove('show');
        }

        // Load saved location on page load
        document.addEventListener('DOMContentLoaded', () => {
            const savedLocation = localStorage.getItem('savedLocation');
            if (savedLocation) {
                const { address } = JSON.parse(savedLocation);
                locationText.textContent = address;
            }
        });

        // Existing cart functionality
    </script>
  </body>
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-section">
        <h3>MunchExpress</h3>
        <p>Delivering happiness, one meal at a time.</p>
        <p> 123 Foodie Street<br>Cuisine City, CC 12345</p>
        <p> (555) 123-4567</p>
      </div>
      <div class="footer-section">
        <h3>Company</h3>
        <ul>
          <li><a href="#">About Us</a></li>
          <li><a href="#">Careers</a></li>
          <li><a href="#">Partner With Us</a></li>
          <li><a href="#">Blog</a></li>
        </ul>
      </div>
      <div class="footer-section">
        <h3>Support</h3>
        <ul>
          <li><a href="#">Help Center</a></li>
          <li><a href="#">Contact Us</a></li>
          <li><a href="#">Privacy Policy</a></li>
          <li><a href="#">Terms of Service</a></li>
        </ul>
      </div>
      <div class="footer-section">
        <h3>Connect With Us</h3>
        <div class="social-links">
          <a href="#" aria-label="Facebook">
            <i class="fab fa-facebook"></i>
          </a>
          <a href="#" aria-label="Twitter">
            <i class="fab fa-twitter"></i>
          </a>
          <a href="#" aria-label="Instagram">
            <i class="fab fa-instagram"></i>
          </a>
          <a href="#" aria-label="LinkedIn">
            <i class="fab fa-linkedin"></i>
          </a>
        </div>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2025 MunchExpress. All rights reserved.</p>
    </div>
  </footer>
</html>